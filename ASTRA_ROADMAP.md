# ASTRA: статус, путь к релизу и объяснение простыми словами

## 1) Что уже сделано
### Ядро протокола
- Собственный handshake (подпись, токен, профиль, transport, obfs, network_id)
- Проверка подписи, anti-replay, токены/trial/revoke
- Rate-limit и блокировка по ошибкам (anti-abuse)

### Транспорт и маскировка
- TCP, UDP, TLS (uTLS с JA3/ALPN), RUDP (retransmit/ACK)
- Фрейминг + padding всего потока
- TLS-обфускация: preface + HTTP/2 frames, фрагментация handshake

### Адаптивность
- Профили SNI + локальное обучение (score/RTT)
- Переключение по профилям/транспортам
- NetworkID учитывается (wifi/cell/eth)

### Сеть и узлы
- Entry → Relay → Exit цепочка
- Health-checks и fallback по узлам
- Egress-политики на Exit (DNS-only, deny/allow по host/port/CIDR)

### Инструменты
- DPI lab (proxy + load test)
- Базовые тесты (handshake, framing, mux)
- Метрики auth_ok/auth_deny

---

## 2) Что ещё нужно сделать (до production)
### Безопасность и аудит
- Внешний аудит протокола
- Устранение атак (replay/DoS/токены)

### Реальные полевые тесты
- Долгие сессии (часы/дни)
- Разные ISP/страны/мобильные сети

### Стабильность и качество
- Нагрузочные тесты в CI
- Мониторинг, алерты, аварийные режимы

### Клиентская часть
- Обновления клиента
- Управление конфигом
- Сбор телеметрии отказов (без утечек)

---

## 3) Чёткий путь к релизу
### Alpha (техдемо)
1. Прогон DPI lab на разных режимах
2. Длинные сессии (24–72 часа)
3. Стабильность RUDP/TLS/MUX

### Beta (пилот)
1. Тест с реальными пользователями
2. Мониторинг отказов/метрик
3. Оптимизация поведения под ISP

### Release (production)
1. Безопасностный аудит
2. Документация и SLA
3. CI/CD + регрессия по тестам

---

## 4) Простыми словами: как работает ASTRA
**Идея:** это не просто VPN-туннель, а “умная система”, которая маскируется под обычный веб-трафик и постоянно адаптируется.

**Шаги:**
1. **Клиент** создает крипто-идентичность (ключи + ClientID).
2. Клиент **подписывает handshake**, добавляет токен/профиль/SNI/transport.
3. **Entry** проверяет подпись и токен, отсекает злоупотребления.
4. Трафик идет через **Entry → Relay → Exit**, при этом:
   - данные упакованы в “обычный” формат
   - могут идти поверх TLS с реальным JA3
   - фрейминг и padding скрывают паттерны
5. Клиент учится: **что лучше работает в этой сети**, и сам выбирает профиль.

---

## 5) Чем ASTRA отличается от VLESS и Hysteria
### VLESS
- Это **простой прокси-протокол** без адаптивности.
- SNI = просто строка в конфиге, нет динамики.
- В ASTRA SNI — **пул профилей + авто-выбор**.

### Hysteria
- Делает упор на **скорость и UDP-ускорение**.
- Не фокусируется на anti-DPI уровне TLS/JA3.
- ASTRA строится как **anti-DPI-first**, с адаптивной мимикрией.

**Итог:**  
ASTRA — не «ещё один VLESS» и не «ещё одна Hysteria».  
Это адаптивная система, которая сама выбирает лучший способ прохода DPI и умеет быстро менять тактику.

---

## 6) Где это реализовано (основные файлы)
- Handshake/протокол: `internal/protocol/handshake.go`
- Token/revoke: `internal/auth/*`
- Transports (TCP/UDP/TLS/RUDP): `internal/transport/*`
- MUX: `internal/transport/mux.go`
- Learning/SNI: `internal/learning/*`, `internal/sni/*`
- Entry: `cmd/astra-entry/main.go`
- Relay: `cmd/astra-relay/main.go`
- Exit: `cmd/astra-exit/main.go`
- DPI Lab: `cmd/astra-lab/main.go`
